<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hrNS">
	<!-- //사번, 부서번호, 비밀번호, 이름, 이메일, 주소, 전화번호, 입사일, 퇴사여부 -->
	<select id="selectEmp" parameterType="string" resultType="Emp">
		select * from emp where emp_no = #{emp_no}
	</select>
	<select id="selectEmpList" resultType="Emp">
		select * from emp order by emp_no desc
	</select>
	<select id="selectEmpCountWithYear" parameterType="string" resultType="int">
		select count(emp_no) from emp where emp_no like #{year}||'%'
	</select>
	
	<!-- 로그인 시에 세션에 올릴 유저 data -->
	<select id="selectHr" parameterType="string" resultType="Hr">
		select e.emp_no, e.emp_name, d.dept_name, e.emp_tel, e.emp_email 
		from emp e 
		join dept d
		on e.dept_no = d.dept_no 
		where e.emp_no = #{emp_no}
	</select>
	
	<!-- 사원 목록 조회(with 부서명) -->
	<select id="selectHrList" resultType="Hr">
		select * from v_hr order by emp_no
	</select>
	
	
	
	
	<!-- 부서리스트 조회 -->
	<select id="selectDeptList" resultType="Dept">
		select * from dept order by dept_no
	</select>
	
	<!-- 사원 등록 -->
	<!-- //사번, 부서번호, 비밀번호, 이름, 이메일, 주소, 전화번호, 입사일, 퇴사여부 -->
	<insert id="insertEmp" parameterType="Emp" >
		insert into emp values (#{emp_no}, #{dept_no}, '0000', #{emp_name}, #{emp_email}, #{emp_address}, #{emp_tel}, #{hiredate}, 'n')
	</insert>
</mapper>

<!-- <resultMap id="empResultMap" type="Emp">
		<id 	column="emp_no" 		property="emp_no" />
		<result column="password" 		property="password" />
		<result column="emp_name" 		property="empName" />
		<result column="emp_email" 		property="empEmail" />
		<result column="emp_address" 	property="empAddress" />
		<result column="emp_tel" 		property="empTel" />
		<result column="hiredate" 		property="hiredate" />
		<result column="resign" 		property="resign" />
		<association property="dept" javaType="Dept" resultMap="deptResultMap" />
	</resultMap>
	<resultMap id="deptResultMap" type="Dept">
		<id		column="dept_no"		property="deptNo"/>
		<result column="dept_name"		property="deptName"/>
	</resultMap>
	<select id="selectEmp" parameterType="string" resultMap="empResultMap">
		SELECT
			e.emp_no,
			e.dept_no,
			e.password,
			e.emp_name,
			e.emp_email,
			e.emp_address,
			e.emp_tel,
			e.hiredate,
			e.resign,
			d.dept_no,
			d.dept_name
		FROM emp e
		JOIN dept d
		ON e.dept_no = d.dept_no
		WHERE emp_no = #{empNo}
	</select>
	<select id="selectEmpList" resultMap="empResultMap">
		SELECT
			e.emp_no,
			e.dept_no,
			e.password,
			e.emp_name,
			e.emp_email,
			e.emp_address,
			e.emp_tel,
			e.hiredate,
			e.resign,
			d.dept_no,
			d.dept_name
		FROM emp e
		JOIN dept d
		ON e.dept_no = d.dept_no
		ORDER BY e.emp_no
	</select>
	<select id="selectDept" parameterType="string" resultMap="deptResultMap">
		select * from dept where dept_no = #{deptNo}
	</select>
	<select id="selectEmpCount" resultType="_int">
		select count(emp_no) from emp
	</select> -->